---
tags: ["Shadre入门精要","图形学"]
date: 2023-04-11
title: 28.让画面动起来 
---
# 

## **纹理动画**

- **序列帧动画**
  序列帧动画是通过依次播放一系列关键帧图像，当播放速度达到一定数值时，看起来就像是一个连续的动画。灵活性较强，通过一张包含关键帧的图像可以得到比较细腻的动画效果，缺点在于需要大量时间制作包含关键帧的图像。
  关键帧实现的关键在于，**每个时刻计算该时刻下应该播放的关键帧的位置**

- **顶点动画**
  游戏中通常使用顶点动画模拟飘动旗帜、湍流小溪的效果，其主要方式是使模型顶点随着时间变化而变化。



该函数只有一个参数v，v参数的类型不仅可以是float类型，也可以是其它float向量。通过该函数的实现可知，它**返回标量或每个矢量中各分量的小数部分。**

- **广告牌技术**
  广告牌技术是另一种常见的顶点动画。广告牌会根据视角方向来旋转一个被纹理着色的多边形，使多边形看起来始终朝着摄像机。
  广告牌技术的本质是构建旋转矩阵。计算过程中先根据初始计算得到目标的表面法线（例如视角方向）和指向上的方向，这两者的方向往往不是垂直的，根据这两者的方向做叉乘得到垂直于两者的方向，再根据这个得到的方向，假定之前的两个方向某一个不变，计算另一个垂直的方向，这样得到三个正交的方向，计算过程类似于：

![img](/images/posts/v2-e3449b70f4c80a1706a8a757e458ac3d_720w.png)

在广告牌技术中需要指定一个锚点，这个锚点在旋转过程中是固定不变的，以此来确定多边形在空间中的位置。

## frac

frac函数通过如下代码实现：

```cpp
float frac(float v)
{
  // floor函数返回值会向下取值
  // floor实验部分可查看《Shader实验室：floor函数》
  return v - floor(v);
}
```

## cross叉乘
